---
layout: post
title: "このフォルダーは空です（大嘘）"
tags: [Windows, macOS, Ubuntu]
excerpt_separator: <!--more-->
---

![SnapCrab_pictures_2023-1-8_11-3-24_No-00.png](..\..\..\assets\img\post\2023-01-08\SnapCrab_pictures_2023-1-8_11-3-24_No-00.png)

去年組み立てた外付け HDD が、なぜか Windows だけデータが入ってない扱いになるという事象がここ最近多発。  
結局原因究明には至らなかったけれど、アクセスできるようになったまでの経緯をメモ。

<!--more-->

# Profile

## PC 1

- Windows 10 と Ubuntu 20.04 のデュアルブート

- 内蔵 SSD × 2, 内蔵 HDD × 1

- RAM : 16GB

- USB 3.0 (Type-A 接続)

## PC 2

- macOS 12.4

- 内蔵 SSD × 1

- USB 3.2 (Type-C 接続)

## 外付け HDD

- 中身：Western Digital WD60EZAZ

- ケース : 玄人志向 GW3.5AM-SU3G2P

- 容量 : 6TB

- フォーマット形式 : exFAT（Mac でフォーマット）

外付け HDD については[こちら](https://blog.yotiosoft.com/2022/11/04/%E5%A4%96%E4%BB%98%E3%81%91HDD%E3%82%92%E7%B5%84%E3%81%BF%E7%AB%8B%E3%81%A6%E3%81%9F.html)もご参照ください。  
Windows, Ubuntu, macOS それぞれで使いたかったので exFAT でフォーマットしてました。

# HDD の挙動不審について

上記に書いた通り、外付け HDD を USB 接続したとき、Windows では HDD 自体は認識するものの、データを認識しない（フォルダ内にデータが存在しないものとして認識される）状態が多発。  
  
Ubuntu では毎回データは認識されるものの、全部が認識されるわけではなく、一部のデータだけがアクセスできる状態。  

![Screenshot from 2023-01-08 11-11-16.png](..\..\..\assets\img\post\2023-01-08\Screenshot%20from%202023-01-08%2011-11-16.png)

  
macOS ではそもそもマウントできず、取り外しもできない状態。なので、やむを得ずシャットダウンからの取り外しで対処。

# 原因

わかりません。フォーマットした当初は特に不具合はなく、12月下旬頃から多発するようになりました。その間、別に HDD に負担をかけるようなこともしておらず…  

一つ思い当たる節があるのは、Windows と Ubuntu のデュアルブート環境の PC で、  
Windows をシャットダウン→ Ubuntu を起動→ Ubuntu をシャットダウン→ Windows を起動  
という操作をしたとき、なぜか Windows が一時的に起動できなくなったこと。  
OS の問題ではなくそもそも BIOS の問題なのか、まず、BIOS が起動してもキーボード操作ができず BIOS 設定に入れないとか、Windows を起動しようとしたらブルースクリーンが出たりとか、「Reset System」と一瞬だけ表示されて再起動の繰り返し状態になったりとか。  

結局何回か再起動を繰り返すうちに何事もなかったかのように復活したのだけど、HDD に異常がみられるようになったのはそれ以降だったと思います。  
ただ、これも特に手を施さないまま修正できてしまったので、きちんと検証できたわけではなく因果関係は不明のまま。

# 復活に至るまで

といっても、再起動を繰り返しただけですが…  

1. Windows に外付け HDD を接続 → データが出てこない

2. 一旦取り外してもう一度接続 → 変わらず

3. Windows をシャットダウン、デュアルブートしてある Ubuntu を起動

4. Ubuntu で外付け HDD を接続 → 一部データだけ出てきた

5. Ubuntu をシャットダウン、もう一度 Windows を起動

6. Windows に外付け HDD を接続 → 相変わらずデータが出てこない

7. 外付け HDD を取り外し、Mac に接続 → マウントできず

8. Mac をシャットダウンして Windows に接続 → 変わらず

9. Windows を再起動 × 5回くらい

10. Windows に外付け HDD を接続 → データが出てきた！直った！

はい。これじゃ何もわからないよね…   
  
本当はディスクスキャンとか色々やってみたいけど、データが破損したら嫌なので実施に踏み込めず。データの退避が完了したらやってみてもいいかも。 

# おわりに

互換性の観点から exFAT は危ないという噂も前々から聞いていたので、とりあえず今はデータを別の場所に移し、NTFS でフォーマットして Windows 専用にすることに。  

パーティションを区切って、一部だけ Ubuntu や Mac とデータ共有するための一時保管場所にするのもいいかも。  

NTFS は実質 Windows 専用だし（Mac では読み取り専用）、ext4 は Windows じゃ使えないし、FAT32 は制限があるし、未だ痒いところに手が届くフォーマット形式は存在しないなと実感。  

2020年代になっても OS の溝は埋まらないねぇ。
