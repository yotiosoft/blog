---
layout: post
title: "Rust でパイプライン入力の有無を判定する「atty」"
tags: [Rust, dptran]
excerpt_separator: <!--more-->
---

個人サイトを運営している皆さん、Google Analytics は活用していますか？私は活用していません。

このブログは収益化しているわけではないので、これまでどんな属性の方々がこのサイトを閲覧しているか、といった点を調査しようという動機がなく、普段は Google Search Console の検索パフォーマンスだけ見て満足していました。

ですが、思ったより様々な解析ができて面白そうだったので、この度導入する運びになりました。

<!--more-->

# 状況

このサイトを Google Analyrics に登録すること自体はしていたのですが、Google tag の設定が未完了でした。（なんでや…）

恐らく、去年 UA から GA4 への強制移行があり、その時にタグの貼り付けを怠っていたのだと思います。

Google tag というのは Google Analytics の解析に必要なタグで、``<head>`` 要素内に配置します。

# やったこと

Google Analytics を開くと、「ウェブサイトから受診したデータはまだありません」という表示がありました。ここで「タグの設定手順を確認」をクリック。

![スクリーンショット 2024-03-09 130446.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20130446.png)



「ウェブストリームの詳細」というページが表示されたら、

![スクリーンショット 2024-03-09 130757.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20130757.png)

一番下の「Google タグ」から「タグ設定を行う」を選択。

![スクリーンショット 2024-03-09 130836.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20130836.png)

続いて「Google タグ」右上の「実装手順」をクリックします。

![スクリーンショット 2024-03-09 130935.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20130935.png)

「実装手順」ページが現れたら、いずれかの選択肢を選択します。

Wordpress などであれば自動で設定できるようですが、当ブログは Jekyll で運営しているのでコードスニペットの貼り付けが必要になります。

よってここは「手動でインストールする」を選択。

![スクリーンショット 2024-03-09 131130.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20131130.png)

するとコードスニペットが表示されますので、これを ``<head>`` 要素内に貼り付けます。

![スクリーンショット 2024-03-09 131130.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20131130.png)

## どこに貼り付ければいいのか？

Jekyll はサイトジェネレータですので、``<head>`` 要素含め、各ページは自動で作成されます。テーマによるかもしれませんが、現在使用している "Type on Strap" テーマでは、``_includes`` ディレクトリ内に ``head.html`` が配置されていました。

![スクリーンショット 2024-03-09 131609.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20131609.png)

ここの一番下にでも貼り付けておきましょう。

![スクリーンショット 2024-03-09 131700.png](C:\Users\ytani\git\blog\assets\img\post\2024-03-09\スクリーンショット%202024-03-09%20131700.png)
